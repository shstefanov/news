var fs = require('fs');


function DataManager() { //(container[], put(a) )
    this.container = new Array();
    this.put = function (request, something) {
        this.container.push(something);
    }
}



function Client(hostname) {
    var http = require("http");
    var host = hostname;
    var request;
    var data;
    var instance = http.createClient(80, host);
    this.get = function (req) {
        request = instance.request('GET', req, {
            'host': host
        }); //req - the request
        request.end();
        request.on('response', function (response) {
            response.on('data', function (chunk) {
                data += chunk;
            });
            response.on('end', function () {
                DM.put(req, data);
                console.log(data.length);
            });
        });
    }
}



function FileManager(dir) {
	var current_dir = dir;
	var current_element = [];
	var list = new Array();
	fs.readdir(current_dir, function (err,files){
		if (err) throw err;
		for(idx in files){
			file = files[idx];
			stats = fs.statSync(current_dir+'/'+file);
			if (stats.isFile()){
				current_element = {type:'file', name:file}
				list.push(current_element);
			}
			if (stats.isDirectory()){
				current_element = list[idx];
				current_element = {type:'directory', name:file}
				list.push(current_element);
				FileManager(current_dir+'/'+file);
			}
		}
	console.log(list);
	});
    
}

function DatabaseManager() {

}

function EventBus() {

}

var c = new Client("focus-news.net");

var DM = new DataManager();


//var FM = new FileManager("./store");
//console.log(FM);

FileManager('./store');



